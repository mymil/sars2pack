<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get US daily mobility data from Descartes Labs — descartes_mobility_data • sars2pack</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Get US daily mobility data from Descartes Labs — descartes_mobility_data" />
<meta property="og:description" content="Descartes Labs quantify the level of human mobility in the US at
the state level. Their methodology looks at a collection of mobile
devices reporting consistently throughout the day. They calculate the
maximum distance moved in kilometers (excluding outliers) from the
first reported location. Using this value, they calculate the median
across all devices in the sample to generate a mobility metric for
selected states." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-93043521-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-93043521-4');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sars2pack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.47</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/datasets.html">Available datasets</a>
    </li>
    <li>
      <a href="../articles/doMCMC.html">Building MCMC-based models of SI for SARS-Cov-2</a>
    </li>
    <li>
      <a href="../articles/index.html">Introduction to sars2pack</a>
    </li>
    <li>
      <a href="../articles/map_visualization.html">Geospatial visualization of COVID-19 datasets</a>
    </li>
    <li>
      <a href="../articles/overview.html">Exploring the COVID-19 pandemic using sars2pack</a>
    </li>
    <li>
      <a href="../articles/r0_estimates.html">Estimating the replication rate, $R_0$</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/seandavi/sars2pack">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get US daily mobility data from Descartes Labs</h1>
    <small class="dont-index">Source: <a href='https://github.com/seandavi/sars2pack/blob/master/R/descartes_mobility.R'><code>R/descartes_mobility.R</code></a></small>
    <div class="hidden name"><code>descartes_mobility_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Descartes Labs quantify the level of human mobility in the US at
the state level. Their methodology looks at a collection of mobile
devices reporting consistently throughout the day. They calculate the
maximum distance moved in kilometers (excluding outliers) from the
first reported location. Using this value, they calculate the median
across all devices in the sample to generate a mobility metric for
selected states.</p>
    </div>

    <pre class="usage"><span class='fu'>descartes_mobility_data</span>()</pre>


    <h2 class="hasAnchor" id="source"><a class="anchor" href="#source"></a>Source</h2>

    
<ul>
<li><p><a href='https://raw.githubusercontent.com/descarteslabs/DL-COVID-19/master/DL-us-mobility-daterow.csv'>https://raw.githubusercontent.com/descarteslabs/DL-COVID-19/master/DL-us-mobility-daterow.csv</a></p></li>
</ul>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    
<ul>
<li><p>country_code: ISO 3166-1 alpha-2 code.</p></li>
<li><p>admin_level: 0 for country, 1 for admin1, 2 for admin2 granularity.</p></li>
<li><p>admin1: GeoNames ADM1 feature name for the first-order administrative division, such as a state in the United States.</p></li>
<li><p>admin2: GeoNames ADM2 feature name for the second-order administrative division, such as a county or borough in the United States.</p></li>
<li><p>fips: FIPS code, a standard geographic identifier, to make it easier to combine this data with other data sets.</p></li>
<li><p>samples: The number of samples observed in the specified region.</p></li>
<li><p>m50: The median of the max-distance mobility for all samples in the specified region.</p></li>
<li><p>m50_index: The percent of normal m50 in the region, with normal m50 defined during 2020-02-17 to 2020-03-07.</p></li>
</ul>

    <h2 class="hasAnchor" id="license"><a class="anchor" href="#license"></a>License</h2>

    


<p>Creative Commons Attribution (CC BY 4.0), see <a href='https://github.com/descarteslabs/DL-COVID-19'>https://github.com/descarteslabs/DL-COVID-19</a></p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ul>
<li><p><a href='https://www.descarteslabs.com/mobility-v097/'>https://www.descarteslabs.com/mobility-v097/</a></p></li>
<li><p><a href='https://www.descarteslabs.com/wp-content/uploads/2020/03/mobility-v097.pdf'>https://www.descarteslabs.com/wp-content/uploads/2020/03/mobility-v097.pdf</a></p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other data-import: 
<code><a href='apple_mobility_data.html'>apple_mobility_data</a>()</code>,
<code><a href='beoutbreakprepared_data.html'>beoutbreakprepared_data</a>()</code>,
<code><a href='cdc_aggregated_projections.html'>cdc_aggregated_projections</a>()</code>,
<code><a href='covidtracker_data.html'>covidtracker_data</a>()</code>,
<code><a href='ecdc_data.html'>ecdc_data</a>()</code>,
<code><a href='eu_data_cache_data.html'>eu_data_cache_data</a>()</code>,
<code><a href='google_mobility_data.html'>google_mobility_data</a>()</code>,
<code><a href='government_policy_timeline.html'>government_policy_timeline</a>()</code>,
<code><a href='healthdata_projections_data.html'>healthdata_projections_data</a>()</code>,
<code><a href='jhu_data.html'>jhu_data</a>()</code>,
<code><a href='jhu_us_data.html'>jhu_us_data</a>()</code>,
<code><a href='kff_icu_beds.html'>kff_icu_beds</a>()</code>,
<code><a href='nytimes_county_data.html'>nytimes_county_data</a>()</code>,
<code><a href='us_county_geo_details.html'>us_county_geo_details</a>()</code>,
<code><a href='us_healthcare_capacity.html'>us_healthcare_capacity</a>()</code>,
<code><a href='us_state_distancing_policy.html'>us_state_distancing_policy</a>()</code>,
<code><a href='usa_facts_data.html'>usa_facts_data</a>()</code></p>
<p>Other mobility: 
<code><a href='apple_mobility_data.html'>apple_mobility_data</a>()</code>,
<code><a href='google_mobility_data.html'>google_mobility_data</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘dplyr’</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:MASS’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    select</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'><span class='no'>res</span> <span class='kw'>=</span> <span class='fu'>descartes_mobility_data</span>()
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>res</span>)</div><div class='output co'>#&gt; [1] "date"        "iso2"        "admin_level" "admin1"      "admin2"     
#&gt; [6] "fips"        "samples"     "m50"         "m50_index"  </div><div class='input'><span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/reexports.html'>glimpse</a></span>(<span class='no'>res</span>)</div><div class='output co'>#&gt; Rows: 146,857
#&gt; Columns: 9
#&gt; $ date        &lt;date&gt; 2020-03-01, 2020-03-02, 2020-03-03, 2020-03-04, 2020-03-…
#&gt; $ iso2        &lt;chr&gt; "US", "US", "US", "US", "US", "US", "US", "US", "US", "US…
#&gt; $ admin_level &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
#&gt; $ admin1      &lt;chr&gt; "Alabama", "Alabama", "Alabama", "Alabama", "Alabama", "A…
#&gt; $ admin2      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
#&gt; $ fips        &lt;chr&gt; "00001", "00001", "00001", "00001", "00001", "00001", "00…
#&gt; $ samples     &lt;dbl&gt; 133826, 143632, 146009, 149352, 144109, 141491, 141163, 1…
#&gt; $ m50         &lt;dbl&gt; 8.331, 10.398, 10.538, 10.144, 10.982, 13.024, 11.373, 8.…
#&gt; $ m50_index   &lt;dbl&gt; 79, 98, 100, 96, 104, 123, 107, 80, 103, 103, 103, 111, 1…</div><div class='input'>
<span class='co'># plot data for Georgia</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>ggplot2</span>)

<span class='co'># this gets us state-level data</span>
<span class='no'>GA</span> <span class='kw'>=</span> <span class='no'>res</span> <span class='kw'>%&gt;%</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>admin1</span><span class='kw'>==</span><span class='st'>'Georgia'</span> <span class='kw'>&amp;</span> <span class='no'>admin_level</span><span class='kw'>==</span><span class='fl'>1</span>)

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>GA</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>x</span><span class='kw'>=</span><span class='no'>date</span>, <span class='kw'>y</span><span class='kw'>=</span><span class='no'>m50_index</span>)) + <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span>() + <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>'M50 index over time in Georgia'</span>)</div><div class='img'><img src='descartes_mobility_data-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>#limit to dates of interest around time that GA is reopening</span>

<span class='no'>GA</span> <span class='kw'>=</span> <span class='no'>GA</span> <span class='kw'>%&gt;%</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>date</span><span class='kw'>&gt;</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>'2020-01-01'</span>) <span class='kw'>&amp;</span> <span class='no'>date</span> <span class='kw'>&lt;</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>'2020-06-01'</span>))
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>GA</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>x</span><span class='kw'>=</span><span class='no'>date</span>, <span class='kw'>y</span><span class='kw'>=</span><span class='no'>m50_index</span>)) +
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span>() +
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>'M50 index over time in Georgia'</span>)</div><div class='img'><img src='descartes_mobility_data-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># Obviously, there are day-specific effects, so use</span>
<span class='co'># R to "regress out" the effects of day of week to better</span>
<span class='co'># observe trend.</span>
<span class='no'>GA</span> <span class='kw'>=</span> <span class='no'>GA</span> <span class='kw'>%&gt;%</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>dow</span> <span class='kw'>=</span> <span class='kw pkg'>lubridate</span><span class='kw ns'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/day.html'>wday</a></span>(<span class='no'>date</span>, <span class='kw'>label</span><span class='kw'>=</span><span class='fl'>TRUE</span>))
<span class='no'>lmfit</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span>(<span class='no'>m50_index</span> ~ <span class='no'>dow</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>GA</span>)

<span class='co'># We are interested in the residuals, or</span>
<span class='co'># the variation in the data not explained by</span>
<span class='co'># the day of the week.</span>
<span class='no'>GA</span>$<span class='no'>m50_index_regressed</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/residuals.html'>residuals</a></span>(<span class='no'>lmfit</span>)

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>GA</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>x</span><span class='kw'>=</span><span class='no'>date</span>, <span class='kw'>y</span><span class='kw'>=</span><span class='no'>m50_index_regressed</span>)) +
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span>() +
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span>()</div><div class='output co'>#&gt; <span class='message'>`geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></div><div class='img'><img src='descartes_mobility_data-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Compare states</span>
<span class='no'>states</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"New York"</span>, <span class='st'>"California"</span>, <span class='st'>"Nevada"</span>,
           <span class='st'>"Texas"</span>, <span class='st'>"Georgia"</span>, <span class='st'>"Florida"</span>)
<span class='no'>ST</span> <span class='kw'>=</span> <span class='no'>res</span> <span class='kw'>%&gt;%</span>
          <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>admin1</span> <span class='kw'>%in%</span> <span class='no'>states</span> <span class='kw'>&amp;</span> <span class='no'>admin_level</span><span class='kw'>==</span><span class='fl'>1</span>) <span class='kw'>%&gt;%</span>
          <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>dow</span> <span class='kw'>=</span> <span class='kw pkg'>lubridate</span><span class='kw ns'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/day.html'>wday</a></span>(<span class='no'>date</span>, <span class='kw'>label</span><span class='kw'>=</span><span class='fl'>TRUE</span>))
<span class='no'>lmfit</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span>(<span class='no'>m50_index</span> ~ <span class='no'>dow</span> + <span class='no'>admin1</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ST</span>)
<span class='no'>ST</span>$<span class='no'>m50_index_regressed</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/residuals.html'>residuals</a></span>(<span class='no'>lmfit</span>)

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>ST</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>x</span><span class='kw'>=</span><span class='no'>date</span>, <span class='kw'>y</span><span class='kw'>=</span><span class='no'>m50_index_regressed</span>)) +
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span>() +
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span>() +
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span>(<span class='st'>'admin1'</span>, <span class='kw'>nrow</span><span class='kw'>=</span><span class='fl'>2</span>) +
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>'Mobility index differences across states'</span>)</div><div class='output co'>#&gt; <span class='message'>`geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></div><div class='img'><img src='descartes_mobility_data-4.png' alt='' width='700' height='433' /></div><div class='input'>


</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sean Davis, John C Mallery, Charles Morefield, VJ Carey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


